<!doctype html>
<html lang="en-CA">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ page.name | escape }} — Premium Supply</title>
  <link rel="stylesheet" href="{{ "/styles.css" | relative_url }}">
</head>

<body>
  <header class="header">
    <div class="container header__inner">
      <a class="brand" href="{{ "/" | relative_url }}">
        <img class="brand__logo" src="{{ "/assets/brand/logo-round.png" | relative_url }}" alt="Premium Supply logo">
        <span class="brand__text">
          <span class="brand__name">Premium Supply</span>
          <span class="brand__tag">Product page • CAD</span>
        </span>
      </a>

      <nav class="nav" aria-label="Primary navigation">
        <a href="{{ "/" | relative_url }}">Home</a>
        <a href="{{ "/products.html" | relative_url }}">Catalogue</a>
        <a href="{{ "/account.html" | relative_url }}">Account</a>
      </nav>

      <div class="header__right">
        <a class="btn btn--solid" href="{{ "/products.html" | relative_url }}?cart=open">
          Cart
        </a>
      </div>
    </div>
  </header>

  <main class="section">
    <div class="container">
      <p class="muted small">
        <a href="{{ "/products.html" | relative_url }}">Catalogue</a> • {{ page.category }}
      </p>

      <div class="pgrid">
        <!-- Images -->
        <div>
          {% if page.image %}
            <a class="pmain" href="{{ page.image | relative_url }}" target="_blank" rel="noopener">
              <img id="mainImage" src="{{ page.image | relative_url }}" alt="{{ page.name | escape }}">
            </a>
          {% else %}
            <div class="pmain"><div class="ph" aria-hidden="true"></div></div>
          {% endif %}

          {% if page.gallery and page.gallery.size > 0 %}
            <div class="pthumbs">
              {% if page.image %}
                <button class="pthumb" type="button" data-src="{{ page.image | relative_url }}">
                  <img src="{{ page.image | relative_url }}" alt="Main image">
                </button>
              {% endif %}
              {% for g in page.gallery %}
                <button class="pthumb" type="button" data-src="{{ g.image | relative_url }}">
                  <img src="{{ g.image | relative_url }}" alt="{{ page.name | escape }}">
                </button>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <!-- Info -->
        <div class="pinfo">
          <div class="meta">
            <span class="badge">{{ page.badge | default: "Standard" }}</span>
            <span class="sku">SKU: {{ page.sku }}</span>
          </div>

          <h1 class="ptitle">{{ page.name }}</h1>
          {% if page.description %}<p class="pdesc">{{ page.description }}</p>{% endif %}

          <div class="divider"></div>

          <h2 class="h3">Details</h2>
          <div class="pcontent">
            {{ content }}
          </div>

          <div class="divider"></div>

          <!-- Related products -->
          <h2 class="h3">Customers may also like</h2>
          {% assign rel = site.products | where: "active", true | where: "category", page.category | where_exp: "p", "p.sku != page.sku" | slice: 0, 4 %}
          <div class="grid">
            {% for rp in rel %}
              <article class="card">
                <div class="card__img">
                  {% if rp.image %}<img src="{{ rp.image | relative_url }}" alt="{{ rp.name | escape }}">{% else %}<div class="ph"></div>{% endif %}
                </div>
                <div class="card__body">
                  <h3 class="card__title">{{ rp.name }}</h3>
                  <p class="card__desc">{{ rp.description | default: "Premium Supply selection." }}</p>
                  <div class="foot">
                    <a class="btn btn--outline" href="{{ rp.url | relative_url }}">View</a>
                  </div>
                </div>
              </article>
            {% endfor %}
          </div>

          <div class="divider"></div>

          <a class="btn btn--outline" href="{{ "/products.html" | relative_url }}">Back to catalogue</a>
        </div>
      </div>
    </div>
  </main>

  <script>
    // thumbnail switcher (no external JS file)
    const main = document.getElementById("mainImage");
    if(main){
      document.querySelectorAll("[data-src]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const src = btn.getAttribute("data-src");
          main.src = src;
          const wrap = main.closest("a");
          if(wrap) wrap.href = src;
        });
      });
    }
  </script>
</body>
</html>